---
version: "2"

settings:
  conductor:
    base: centos:7
    roles_path:
      - ./roles
      - ../roles/
    environment:
      DOCKER_CLIENT_TIMEOUT: '600'
  project_name: foreman

services:
  foreman-base:
    from: centos:7
    roles:
      - epel_repositories
      - role: puppet_repositories
        puppet_repositories_version: 4
      - role: foreman_repositories
        foreman_repositories_environment: staging
      - role: katello_repositories
        katello_repositories_environment: staging
      - foreman
  foreman:
    from: foreman-foreman-base:latest
    roles:
      - noop
  foreman-providers:
    from: foreman-foreman:latest
    roles:
      - foreman_providers
  dynflow:
    from: quay.io/foreman/foreman-base:latest
    roles:
      - dynflow
